<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.example.agentprojectjava.mapper.ChatMapper">
    <select id="SelectHistoryByUserId" resultType="org.example.agentprojectjava.pojo.HistorySession">
        select receiverId,updatedTime,receiverName from history_session
        <where>
            userId = #{userId}
        </where>
        order by id desc
    </select>
    <select id="SelectUserNameByEmail" resultType="org.example.agentprojectjava.pojo.NormalUser">
        select id,avatar,userName from myuser
        <where>
            userEmail = #{userEmail}
        </where>
    </select>
    <select id="SelectIdBySenderAndReceiver" resultType="long">
        select id from history_session
        <where>
            userId = #{userId}
            and
            receiverId = #{receiverId}
        </where>
    </select>
    <insert id="InsertHistorySession">
        insert into history_session
        (userId,receiverId,receiverName,avatar,createdTime,updatedTime)
        values
        (#{userId},#{receiverId},#{receiverName},#{avatar},now(),now())
    </insert>
    <select id="SelectNameAndAvatarById" resultType="org.example.agentprojectjava.pojo.NormalUser">
        select avatar, userName from myuser
        <where>
            id = #{id}
        </where>
    </select>
</mapper>